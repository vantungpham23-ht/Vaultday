import{a as J,b as C,c as X,d as ee,e as te,f as ne,g as oe,h as re,i as ie,j as ae,k as se,l as ce,m as le,n as de,o as ge}from"./chunk-NK5U2JAY.js";import{$ as q,B as h,C as B,G as p,I as l,J as i,K as r,L as u,O,P as f,Q as m,R as V,S as N,T as K,U as w,V as c,W as x,X as S,_ as L,a as R,b as F,c as d,ea as G,fa as Y,ga as $,ia as H,l as y,ma as Q,o as A,oa as W,p as M,q as b,qa as Z,r as U,s as j,y as s}from"./chunk-4GERC5WN.js";var P=class o{keys=new Map;currentKeyId=null;constructor(){this.initializeEncryption()}initializeEncryption(){return d(this,null,function*(){try{let t=this.generateKeyId(),e=yield this.generateKey();this.keys.set(t,{id:t,key:e,createdAt:new Date}),this.currentKeyId=t,console.log("\u{1F510} Encryption service initialized with key:",t)}catch(t){console.error("\u274C Failed to initialize encryption:",t)}})}generateKeyId(){return`key_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateKey(){return d(this,null,function*(){return yield crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])})}encryptMessage(t,e){return d(this,null,function*(){try{return{encryptedData:this.simpleEncrypt(t),iv:"simple-cipher",keyId:"simple-key"}}catch(n){throw console.error("\u274C Encryption failed:",n),n}})}decryptMessage(t,e){return d(this,null,function*(){try{return this.simpleDecrypt(t.encryptedData)}catch(n){throw console.error("\u274C Decryption failed:",n),n}})}simpleEncrypt(t){return t.split("").map(n=>n>="a"&&n<="z"?String.fromCharCode((n.charCodeAt(0)-97+13)%26+97):n>="A"&&n<="Z"?String.fromCharCode((n.charCodeAt(0)-65+13)%26+65):n).join("")}simpleDecrypt(t){return t.split("").map(n=>n>="a"&&n<="z"?String.fromCharCode((n.charCodeAt(0)-97-13+26)%26+97):n>="A"&&n<="Z"?String.fromCharCode((n.charCodeAt(0)-65-13+26)%26+65):n).join("")}arrayBufferToBase64(t){let e=new Uint8Array(t),n="";for(let a=0;a<e.byteLength;a++)n+=String.fromCharCode(e[a]);return btoa(n)}base64ToArrayBuffer(t){let e=atob(t),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n.buffer}generateNewKey(){return d(this,null,function*(){try{let t=this.generateKeyId(),e=yield this.generateKey();return this.keys.set(t,{id:t,key:e,createdAt:new Date}),this.currentKeyId=t,console.log("\u{1F510} New encryption key generated:",t),t}catch(t){throw console.error("\u274C Failed to generate new key:",t),t}})}getCurrentKeyId(){return this.currentKeyId}isEncryptionAvailable(){return this.currentKeyId!==null&&this.keys.has(this.currentKeyId)}getEncryptionStatus(){return{available:this.isEncryptionAvailable(),keyId:this.currentKeyId,keyCount:this.keys.size}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=y({token:o,factory:o.\u0275fac,providedIn:"root"})};var I=class o{constructor(t,e){this.environmentService=t;this.encryptionService=e}messageCallbacks=new Map;pollingIntervals=new Map;mockMessages=[];queryDatabase(n){return d(this,arguments,function*(t,e=[]){if(this.environmentService.isLocalEnvironment())return console.log("\u{1F527} Local development: Skipping chat database query"),[];try{let g=yield(yield fetch("/.netlify/functions/db-pg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,params:e})})).json();if(!g.ok)throw new Error(g.error||"Database query failed");return g.data}catch(a){throw console.error("Database query error:",a),a}})}decryptAllMessages(t,e){return d(this,null,function*(){return yield Promise.all(t.map(a=>d(this,null,function*(){if(a.decryptedContent)return a;try{let g=yield this.decryptMessage(a,e);return F(R({},a),{decryptedContent:g})}catch(g){return console.error("Failed to decrypt message:",g),F(R({},a),{decryptedContent:a.content})}})))})}decryptMessage(t,e){return d(this,null,function*(){try{if(!t.encrypted||!t.encryption_data)return t.content;let n=yield this.encryptionService.decryptMessage(t.encryption_data,e);return console.log("\u{1F513} Message decrypted successfully"),n}catch(n){return console.error("\u274C Failed to decrypt message:",n),"[Encrypted message - decryption failed]"}})}fetchMessages(t){return d(this,null,function*(){if(this.environmentService.isLocalEnvironment())return{data:this.mockMessages.filter(n=>n.room_id===t).sort((n,a)=>new Date(n.created_at).getTime()-new Date(a.created_at).getTime()),error:null};try{let e=new Date(Date.now()-864e5).toISOString(),n=`
        SELECT * FROM messages 
        WHERE room_id = $1 AND created_at > $2
        ORDER BY created_at ASC
      `,a=[t,e];return{data:(yield this.queryDatabase(n,a))||[],error:null}}catch(e){return{data:null,error:e}}})}sendMessage(t,e,n){return d(this,null,function*(){if(this.environmentService.isLocalEnvironment()){let a=e,g;try{g=yield this.encryptionService.encryptMessage(e,t),a=g.encryptedData,console.log("\u{1F510} Message encrypted for local development")}catch(v){console.warn("\u26A0\uFE0F Encryption failed, sending unencrypted message:",v)}let _={id:`mock-msg-${Date.now()}`,room_id:t,content:a,user_id:n,created_at:new Date().toISOString(),encrypted:g!==void 0,encryption_data:g};return this.mockMessages.push(_),setTimeout(()=>{(this.messageCallbacks.get(t)||[]).forEach(E=>E(_))},100),{data:_,error:null}}try{let a=`
        INSERT INTO messages (room_id, content, user_id, created_at)
        VALUES ($1, $2, $3, NOW())
        RETURNING *
      `,g=[t,e,n];return{data:(yield this.queryDatabase(a,g))[0]||null,error:null}}catch(a){return{data:null,error:a}}})}listenToRoom(t,e){this.messageCallbacks.has(t)||this.messageCallbacks.set(t,[]),this.messageCallbacks.get(t).push(e),this.pollingIntervals.has(t)||this.startPolling(t)}startPolling(t){return d(this,null,function*(){let e=new Date().toISOString(),n=()=>d(this,null,function*(){try{let g=`
          SELECT * FROM messages 
          WHERE room_id = $1 AND created_at > $2
          ORDER BY created_at ASC
        `,_=[t,e],v=yield this.queryDatabase(g,_);if(v&&v.length>0){e=v[v.length-1].created_at;let E=this.messageCallbacks.get(t)||[];v.forEach(z=>{E.forEach(D=>D(z))})}}catch(g){console.error("Polling error:",g)}}),a=window.setInterval(n,2e3);this.pollingIntervals.set(t,a)})}unsubscribeFromRoom(t){this.messageCallbacks.delete(t);let e=this.pollingIntervals.get(t);e&&(clearInterval(e),this.pollingIntervals.delete(t))}unsubscribeFromAllRooms(){this.messageCallbacks.clear(),this.pollingIntervals.forEach(t=>{clearInterval(t)}),this.pollingIntervals.clear()}static \u0275fac=function(e){return new(e||o)(A(le),A(P))};static \u0275prov=y({token:o,factory:o.\u0275fac,providedIn:"root"})};var k=class o{USERNAME_KEY="vaultday_username";USER_ID_KEY="vaultday_user_id";constructor(){}saveUsername(t){try{localStorage.setItem(this.USERNAME_KEY,t)}catch(e){console.warn("Failed to save username to localStorage:",e)}}getUsername(){try{return localStorage.getItem(this.USERNAME_KEY)}catch(t){return console.warn("Failed to get username from localStorage:",t),null}}clearUsername(){try{localStorage.removeItem(this.USERNAME_KEY)}catch(t){console.warn("Failed to clear username from localStorage:",t)}}saveUserId(t){try{localStorage.setItem(this.USER_ID_KEY,t)}catch(e){console.warn("Failed to save user ID to localStorage:",e)}}getUserId(){try{return localStorage.getItem(this.USER_ID_KEY)}catch(t){return console.warn("Failed to get user ID from localStorage:",t),null}}clearUserId(){try{localStorage.removeItem(this.USER_ID_KEY)}catch(t){console.warn("Failed to clear user ID from localStorage:",t)}}clearAllUserData(){this.clearUsername(),this.clearUserId()}hasUserData(){return this.getUsername()!==null&&this.getUserId()!==null}static \u0275fac=function(e){return new(e||o)};static \u0275prov=y({token:o,factory:o.\u0275fac,providedIn:"root"})};var ve=["messagesContainer"];function fe(o,t){o&1&&(i(0,"div",45)(1,"span",46),c(2,"\u{1F510}"),r(),i(3,"span",47),c(4,"End-to-End Encrypted"),r()())}function _e(o,t){o&1&&(i(0,"span"),c(1,"M\u1EADt kh\u1EA9u l\xE0 b\u1EAFt bu\u1ED9c"),r())}function Ce(o,t){if(o&1&&(i(0,"div",60),p(1,_e,2,0,"span",61),r()),o&2){let e=m(2);s(),l("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.required)}}function ye(o,t){if(o&1){let e=O();i(0,"div",48)(1,"div",49)(2,"div",50)(3,"h2",51)(4,"span",52),c(5,"\u{1F512}"),r(),c(6," Ph\xF2ng \u0111\u01B0\u1EE3c b\u1EA3o v\u1EC7 "),r(),i(7,"p",53),c(8,"Nh\u1EADp m\u1EADt kh\u1EA9u \u0111\u1EC3 v\xE0o ph\xF2ng"),r()(),i(9,"div",54)(10,"form",55),f("ngSubmit",function(){M(e);let a=m();return b(a.verifyPassword())}),i(11,"div",56),u(12,"input",57),p(13,Ce,2,1,"div",58),r(),i(14,"button",59),c(15," X\xE1c nh\u1EADn "),r()()()()()}if(o&2){let e=m();s(10),l("formGroup",e.passwordForm),s(2),w("error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),s(),l("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),s(),l("disabled",e.passwordForm.invalid)}}function Me(o,t){o&1&&(i(0,"p",79),c(1," \u2705 Ph\xF2ng n\xE0y s\u1EBD hi\u1EC3n th\u1ECB trong danh s\xE1ch ph\xF2ng c\xF4ng khai "),r())}function be(o,t){o&1&&(i(0,"p",79),c(1," \u{1F512} Ph\xF2ng n\xE0y s\u1EBD \u1EA9n kh\u1ECFi danh s\xE1ch ph\xF2ng c\xF4ng khai "),r())}function xe(o,t){if(o&1){let e=O();i(0,"div",62)(1,"div",63)(2,"div",64)(3,"h3",65),c(4,"C\xE0i \u0110\u1EB7t Ph\xF2ng"),r(),i(5,"button",66),f("click",function(){M(e);let a=m();return b(a.toggleRoomSettings())}),i(6,"span",67),c(7,"\u2715"),r()()(),i(8,"div",68)(9,"div",69)(10,"div",70)(11,"span",71),c(12,"\u{1F310}"),r(),i(13,"span",72),c(14,"Hi\u1EC3n th\u1ECB c\xF4ng khai"),r()(),i(15,"div",73)(16,"label",74)(17,"input",75),f("change",function(){M(e);let a=m();return b(a.toggleRoomVisibility())}),r(),u(18,"span",76),r()()(),i(19,"div",77),p(20,Me,2,0,"p",78)(21,be,2,0,"p",78),r()()()()}if(o&2){let e=m();s(17),l("checked",e.roomVisibilityToggle),s(3),l("ngIf",e.roomVisibilityToggle),s(),l("ngIf",!e.roomVisibilityToggle)}}function Pe(o,t){o&1&&(i(0,"span"),c(1,"T\xEAn l\xE0 b\u1EAFt bu\u1ED9c"),r())}function Oe(o,t){if(o&1&&(i(0,"div",60),p(1,Pe,2,0,"span",61),r()),o&2){let e=m(2);s(),l("ngIf",e.username==null||e.username.errors==null?null:e.username.errors.required)}}function we(o,t){if(o&1){let e=O();i(0,"div",80)(1,"div",49)(2,"div",50)(3,"h2",51)(4,"span",52),c(5,"\u{1F44B}"),r(),c(6," Ch\xE0o m\u1EEBng b\u1EA1n! "),r(),i(7,"p",53),c(8,"Nh\u1EADp t\xEAn \u0111\u1EC3 b\u1EAFt \u0111\u1EA7u tr\xF2 chuy\u1EC7n"),r()(),i(9,"div",54)(10,"form",81),f("ngSubmit",function(){M(e);let a=m();return b(a.setUsername())}),i(11,"div",56),u(12,"input",82),p(13,Oe,2,1,"div",58),r(),i(14,"button",83),c(15," B\u1EAFt \u0111\u1EA7u chat "),r()()()()()}if(o&2){let e=m();s(10),l("formGroup",e.usernameForm),s(2),w("error",(e.username==null?null:e.username.invalid)&&(e.username==null?null:e.username.touched)),l("value",e.currentUsername||""),s(),l("ngIf",(e.username==null?null:e.username.invalid)&&(e.username==null?null:e.username.touched)),s(),l("disabled",e.usernameForm.invalid)}}function Ee(o,t){if(o&1&&(i(0,"div",84)(1,"span",85),c(2,"\u26A0\uFE0F"),r(),c(3),r()),o&2){let e=m();s(3),S(" ",e.errorMessage," ")}}function Se(o,t){o&1&&(i(0,"div",86),u(1,"div",87),i(2,"p"),c(3,"\u0110ang t\u1EA3i tin nh\u1EAFn..."),r()())}function Ie(o,t){o&1&&(i(0,"div",91)(1,"div",92),c(2,"\u{1F4AC}"),r(),i(3,"h3"),c(4,"Ch\u01B0a c\xF3 tin nh\u1EAFn n\xE0o"),r(),i(5,"p"),c(6,"H\xE3y l\xE0 ng\u01B0\u1EDDi \u0111\u1EA7u ti\xEAn g\u1EEDi tin nh\u1EAFn!"),r()())}function ke(o,t){if(o&1&&(i(0,"div",95)(1,"div",96)(2,"div",97),c(3),r(),i(4,"div",98)(5,"span",99),c(6),L(7,"date"),r()()()()),o&2){let e=t.$implicit,n=m(3);w("own-message",n.isOwnMessage(e))("other-message",!n.isOwnMessage(e)),s(3),x(e.decryptedContent||e.content),s(3),x(q(7,6,e.created_at,"HH:mm"))}}function De(o,t){if(o&1&&(i(0,"div",93),p(1,ke,8,9,"div",94),r()),o&2){let e=m(2);s(),l("ngForOf",e.messages)("ngForTrackBy",e.trackByMessageId)}}function Re(o,t){if(o&1&&(i(0,"div",88,0),p(2,Ie,7,0,"div",89)(3,De,2,2,"div",90),r()),o&2){let e=m();s(2),l("ngIf",e.messages.length===0),s(),l("ngIf",e.messages.length>0)}}function Fe(o,t){o&1&&(i(0,"span",108),c(1,"\u{1F4E4}"),r())}function Ae(o,t){if(o&1&&(i(0,"span",109),c(1),r()),o&2){let e=m(2);s(),x(e.getRemainingCooldown())}}function Te(o,t){o&1&&(i(0,"span"),c(1,"Tin nh\u1EAFn l\xE0 b\u1EAFt bu\u1ED9c"),r())}function ze(o,t){if(o&1&&(i(0,"div",60),p(1,Te,2,0,"span",61),r()),o&2){let e=m(2);s(),l("ngIf",e.content==null||e.content.errors==null?null:e.content.errors.required)}}function Ue(o,t){if(o&1){let e=O();i(0,"div",100)(1,"form",101),f("ngSubmit",function(){M(e);let a=m();return b(a.sendMessage())}),i(2,"div",102)(3,"div",103),u(4,"input",104),r(),i(5,"button",105),p(6,Fe,2,0,"span",106)(7,Ae,2,1,"span",107),r()(),p(8,ze,2,1,"div",58),r()()}if(o&2){let e=m();s(),l("formGroup",e.messageForm),s(3),w("error",(e.content==null?null:e.content.invalid)&&(e.content==null?null:e.content.touched)),s(),l("disabled",e.messageForm.invalid||!e.canSendMessage())("title",e.canSendMessage()?"G\u1EEDi tin nh\u1EAFn":"Vui l\xF2ng \u0111\u1EE3i "+e.getRemainingCooldown()+" gi\xE2y"),s(),l("ngIf",e.canSendMessage()),s(),l("ngIf",!e.canSendMessage()),s(),l("ngIf",(e.content==null?null:e.content.invalid)&&(e.content==null?null:e.content.touched))}}function je(o,t){if(o&1&&(i(0,"div",110)(1,"span",85),c(2,"\u26A0\uFE0F"),r(),c(3),r()),o&2){let e=m();s(3),S(" ",e.errorMessage," ")}}function Be(o,t){if(o&1&&(i(0,"div",111)(1,"span",112),c(2,"\u2705"),r(),c(3),r()),o&2){let e=m();s(3),S(" ",e.successMessage," ")}}var pe=class o{constructor(t,e,n,a,g,_,v,E,z){this.route=t;this.router=e;this.fb=n;this.chatService=a;this.databaseService=g;this.seoService=_;this.encryptionService=v;this.storageService=E;this.soundService=z;this.messageForm=this.fb.group({content:["",[C.required,C.minLength(1)]]});let D=this.storageService.getUsername();this.usernameForm=this.fb.group({username:[D||"",[C.required,C.minLength(1)]]}),this.passwordForm=this.fb.group({password:["",[C.required,C.minLength(1)]]})}roomId=null;room=null;messages=[];messageForm;usernameForm;passwordForm;currentUsername="";currentUserId="";isLoading=!1;errorMessage="";successMessage="";showPasswordModal=!1;isPasswordRequired=!1;showRoomSettings=!1;roomVisibilityToggle=!1;lastMessageTime=0;rateLimitSeconds=5;cooldownInterval;messagesContainerRef;ngOnInit(){return d(this,null,function*(){if(this.roomId=this.route.snapshot.paramMap.get("id"),!this.roomId){this.router.navigate(["/"]);return}this.loadCachedUserData(),yield this.loadRoomDetails(),this.room&&this.seoService.setChatRoomSEO(this.room.name),this.room?.password?(this.isPasswordRequired=!0,this.showPasswordModal=!0):(yield this.loadMessages(),this.subscribeToMessages(),setTimeout(()=>this.scrollToBottom(),100))})}ngOnDestroy(){this.roomId&&this.chatService.unsubscribeFromRoom(this.roomId),this.cooldownInterval&&clearInterval(this.cooldownInterval)}loadCachedUserData(){let t=this.storageService.getUsername(),e=this.storageService.getUserId();t&&e&&(this.currentUsername=t,this.currentUserId=e,console.log("\u2705 Loaded cached user data:",{username:t,userId:e}))}loadRoomDetails(){return d(this,null,function*(){if(!this.roomId)return;let{data:t,error:e}=yield this.databaseService.getRoomById(this.roomId);e?(console.error("Error loading room:",e),this.errorMessage="Ph\xF2ng kh\xF4ng t\u1ED3n t\u1EA1i"):(this.room=t,this.roomVisibilityToggle=this.room?.is_public||!1)})}loadMessages(){return d(this,null,function*(){if(!this.roomId)return;this.isLoading=!0;let{data:t,error:e}=yield this.chatService.fetchMessages(this.roomId);e?(console.error("Error loading messages:",e),this.errorMessage="Kh\xF4ng th\u1EC3 t\u1EA3i tin nh\u1EAFn"):this.messages=yield this.chatService.decryptAllMessages(t||[],this.roomId),this.isLoading=!1,setTimeout(()=>this.scrollToBottom(),0)})}subscribeToMessages(){this.roomId&&(this.chatService.unsubscribeFromRoom(this.roomId),this.chatService.listenToRoom(this.roomId,t=>d(this,null,function*(){if(!this.messages.some(n=>n.id===t.id)){let n=yield this.chatService.decryptAllMessages([t],this.roomId);this.messages.push(n[0]),setTimeout(()=>this.scrollToBottom(),0)}})))}verifyPassword(){return d(this,null,function*(){if(this.passwordForm.valid&&this.room){let{password:t}=this.passwordForm.value;t===this.room.password?(this.showPasswordModal=!1,this.isPasswordRequired=!1,yield this.loadMessages(),this.subscribeToMessages(),this.soundService.playSuccess(),setTimeout(()=>this.scrollToBottom(),100)):(this.errorMessage="M\u1EADt kh\u1EA9u kh\xF4ng \u0111\xFAng",this.passwordForm.reset(),this.soundService.playError())}})}setUsername(){this.usernameForm.valid&&(this.currentUsername=this.usernameForm.value.username,this.currentUserId=`user-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,this.storageService.saveUsername(this.currentUsername),this.storageService.saveUserId(this.currentUserId),console.log("\u2705 Saved user data to cache:",{username:this.currentUsername,userId:this.currentUserId}))}decryptMessage(t){return d(this,null,function*(){try{return yield this.chatService.decryptMessage(t,this.roomId)}catch(e){return console.error("Failed to decrypt message:",e),t.content}})}sendMessage(){return d(this,null,function*(){if(this.messageForm.valid&&this.roomId&&this.currentUsername&&this.currentUserId){if(!this.canSendMessage()){let n=this.getRemainingCooldown();this.errorMessage=`Vui l\xF2ng \u0111\u1EE3i ${n} gi\xE2y tr\u01B0\u1EDBc khi g\u1EEDi tin nh\u1EAFn ti\u1EBFp theo`,this.soundService.playError();return}let{content:t}=this.messageForm.value,{error:e}=yield this.chatService.sendMessage(this.roomId,t,this.currentUserId);e?(console.error("Error sending message:",e),this.errorMessage="Kh\xF4ng th\u1EC3 g\u1EEDi tin nh\u1EAFn",this.soundService.playError()):(this.messageForm.reset(),this.errorMessage="",this.lastMessageTime=Date.now(),this.startCooldownTimer(),this.soundService.playMessageSend(),setTimeout(()=>this.scrollToBottom(),0))}})}goBack(){this.router.navigate(["/"])}toggleRoomSettings(){this.showRoomSettings=!this.showRoomSettings}toggleRoomVisibility(){return d(this,null,function*(){if(!this.roomId)return;let t=!this.roomVisibilityToggle,{data:e,error:n}=yield this.databaseService.updateRoomVisibility(this.roomId,t);n?(console.error("Error updating room visibility:",n),this.errorMessage="Kh\xF4ng th\u1EC3 c\u1EADp nh\u1EADt tr\u1EA1ng th\xE1i ph\xF2ng",this.soundService.playError()):(this.roomVisibilityToggle=t,this.room&&(this.room.is_public=t),this.successMessage=t?"Ph\xF2ng \u0111\xE3 \u0111\u01B0\u1EE3c c\xF4ng khai":"Ph\xF2ng \u0111\xE3 \u0111\u01B0\u1EE3c \u1EA9n",this.soundService.playToggle(),setTimeout(()=>{this.successMessage=""},3e3))})}get content(){return this.messageForm.get("content")}get username(){return this.usernameForm.get("username")}get password(){return this.passwordForm.get("password")}trackByMessageId(t,e){return e.id}isOwnMessage(t){return t.user_id===this.currentUserId}canSendMessage(){return Date.now()-this.lastMessageTime>=this.rateLimitSeconds*1e3}getRemainingCooldown(){let e=Date.now()-this.lastMessageTime,n=this.rateLimitSeconds*1e3-e;return Math.max(0,Math.ceil(n/1e3))}startCooldownTimer(){this.cooldownInterval&&clearInterval(this.cooldownInterval),this.cooldownInterval=setInterval(()=>{this.canSendMessage()&&(clearInterval(this.cooldownInterval),this.cooldownInterval=null)},1e3)}scrollToBottom(){let t=this.messagesContainerRef?.nativeElement;t&&(t.scrollTop=t.scrollHeight)}static \u0275fac=function(e){return new(e||o)(h(Q),h(W),h(re),h(I),h(de),h(ge),h(P),h(k),h(se))};static \u0275cmp=B({type:o,selectors:[["app-chat-room"]],viewQuery:function(e,n){if(e&1&&V(ve,5),e&2){let a;N(a=K())&&(n.messagesContainerRef=a.first)}},decls:53,vars:14,consts:[["messagesContainer",""],[1,"chat-room-container"],[1,"chat-header"],[1,"header-left"],["appSoundClick","","soundType","button",1,"back-button",3,"click"],[1,"back-icon"],[1,"back-text"],[1,"header-center"],[1,"room-logo-container"],[1,"room-logo-icon"],["viewBox","0 0 32 32","width","24","height","24",1,"room-logo-svg"],["id","roomLogoGrad","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",2,"stop-color","#8b5cf6","stop-opacity","1"],["offset","100%",2,"stop-color","#a78bfa","stop-opacity","1"],["fill","none","stroke","url(#roomLogoGrad)","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M8 10c-1 0-2 1-2 2v8c0 1 1 2 2 2h1"],["d","M9 12h14c1 0 2 1 2 2v4c0 1-1 2-2 2h-8l-3 3v-3H9c-1 0-2-1-2-2v-4c0-1 1-2 2-2z"],["d","M23 10c1 0 2 1 2 2v8c0 1-1 2-2 2h-1"],["cx","14","cy","16","r","1","fill","url(#roomLogoGrad)"],["cx","18","cy","16","r","1","fill","url(#roomLogoGrad)"],[1,"room-title"],[1,"room-status"],[1,"cleanup-notice"],[1,"cleanup-icon"],[1,"cleanup-text"],["class","encryption-status",4,"ngIf"],[1,"header-right"],[1,"modern-toggle-switch",3,"title"],["type","checkbox","aria-label","B\u1EADt/t\u1EAFt hi\u1EC3n th\u1ECB c\xF4ng khai","appSoundClick","","soundType","toggle",3,"change","checked"],[1,"toggle-track"],[1,"toggle-text"],[1,"toggle-thumb"],[1,"countdown-section"],[1,"chat-content"],["class","password-modal",4,"ngIf"],["class","room-settings-panel",4,"ngIf"],["class","username-modal",4,"ngIf"],["class","error-banner",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","messages-container",4,"ngIf"],["class","message-input-container",4,"ngIf"],["class","error-toast",4,"ngIf"],["class","success-toast",4,"ngIf"],[1,"version-footer"],[1,"version-text"],[1,"encryption-status"],[1,"encryption-icon"],[1,"encryption-text"],[1,"password-modal"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-icon"],[1,"modal-description"],[1,"modal-body"],[1,"password-form",3,"ngSubmit","formGroup"],[1,"form-group"],["type","password","formControlName","password","placeholder","Nh\u1EADp m\u1EADt kh\u1EA9u...",1,"form-input"],["class","error-message",4,"ngIf"],["type","submit","appSoundClick","","soundType","button",1,"btn-primary","btn-lg","w-full",3,"disabled"],[1,"error-message"],[4,"ngIf"],[1,"room-settings-panel"],[1,"settings-content"],[1,"settings-header"],[1,"settings-title"],[1,"close-settings",3,"click"],[1,"close-icon"],[1,"settings-body"],[1,"setting-item"],[1,"setting-label"],[1,"setting-icon"],[1,"setting-text"],[1,"setting-control"],[1,"toggle-switch"],["type","checkbox",3,"change","checked"],[1,"toggle-slider"],[1,"setting-description"],["class","description-text",4,"ngIf"],[1,"description-text"],[1,"username-modal"],[1,"username-form",3,"ngSubmit","formGroup"],["type","text","formControlName","username","placeholder","Nh\u1EADp t\xEAn c\u1EE7a b\u1EA1n...",1,"form-input",3,"value"],["type","submit","appSoundClick","","soundType","success",1,"btn-primary","btn-lg","w-full",3,"disabled"],[1,"error-banner"],[1,"error-icon"],[1,"loading-container"],[1,"loading-spinner"],[1,"messages-container"],["class","empty-messages",4,"ngIf"],["class","messages-list",4,"ngIf"],[1,"empty-messages"],[1,"empty-icon"],[1,"messages-list"],["class","message-item",3,"own-message","other-message",4,"ngFor","ngForOf","ngForTrackBy"],[1,"message-item"],[1,"message-content"],[1,"message-text"],[1,"message-meta"],[1,"message-time"],[1,"message-input-container"],[1,"message-form",3,"ngSubmit","formGroup"],[1,"input-group"],[1,"input-wrapper"],["type","text","formControlName","content","placeholder","Nh\u1EADp tin nh\u1EAFn...",1,"message-input"],["type","submit","appSoundClick","","soundType","message",1,"send-button",3,"disabled","title"],["class","send-icon",4,"ngIf"],["class","cooldown-text",4,"ngIf"],[1,"send-icon"],[1,"cooldown-text"],[1,"error-toast"],[1,"success-toast"],[1,"success-icon"]],template:function(e,n){e&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),f("click",function(){return n.goBack()}),i(4,"span",5),c(5,"\u2190"),r(),i(6,"span",6),c(7,"Quay l\u1EA1i"),r()()(),i(8,"div",7)(9,"div",8)(10,"div",9),U(),i(11,"svg",10)(12,"defs")(13,"linearGradient",11),u(14,"stop",12)(15,"stop",13),r()(),i(16,"g",14),u(17,"path",15)(18,"path",16)(19,"path",17),r(),u(20,"circle",18)(21,"circle",19),r()(),j(),i(22,"h1",20),c(23),r()(),i(24,"div",21)(25,"div",22)(26,"span",23),c(27,"\u{1F55B}"),r(),i(28,"span",24),c(29,"T\u1EF1 \u0111\u1ED9ng x\xF3a l\xFAc 00:00"),r()(),p(30,fe,5,0,"div",25),r()(),i(31,"div",26)(32,"label",27)(33,"input",28),f("change",function(){return n.toggleRoomVisibility()}),r(),i(34,"span",29)(35,"span",30),c(36),r(),u(37,"span",31),r()()()(),i(38,"div",32),u(39,"app-countdown-timer"),r(),i(40,"div",33),p(41,ye,16,5,"div",34)(42,xe,22,3,"div",35)(43,we,16,6,"div",36)(44,Ee,4,1,"div",37)(45,Se,4,0,"div",38)(46,Re,4,2,"div",39)(47,Ue,9,8,"div",40),r(),p(48,je,4,1,"div",41)(49,Be,4,1,"div",42),i(50,"div",43)(51,"p",44),c(52,"Version 0.1"),r()()()),e&2&&(s(23),x((n.room==null?null:n.room.name)||"\u0110ang t\u1EA3i..."),s(7),l("ngIf",n.encryptionService.isEncryptionAvailable()),s(2),l("title",n.roomVisibilityToggle?"\u0110ang c\xF4ng khai":"\u0110ang \u1EA9n"),s(),l("checked",!n.roomVisibilityToggle),s(3),x(n.roomVisibilityToggle?"":"\u1EA8N"),s(5),l("ngIf",n.showPasswordModal),s(),l("ngIf",n.showRoomSettings),s(),l("ngIf",!n.currentUsername&&!n.isPasswordRequired),s(),l("ngIf",n.errorMessage),s(),l("ngIf",n.isLoading),s(),l("ngIf",!n.isLoading&&n.currentUsername&&!n.isPasswordRequired),s(),l("ngIf",n.currentUsername&&!n.isPasswordRequired),s(),l("ngIf",n.errorMessage),s(),l("ngIf",n.successMessage))},dependencies:[H,G,Y,Z,ie,te,J,X,ee,ne,oe,ae,ce,$],styles:['.chat-room-container[_ngcontent-%COMP%]{width:100%;max-width:500px;height:100vh;margin:0 auto;background:var(--bg-primary);border:2px solid var(--border-neon);border-radius:var(--radius-lg);box-shadow:var(--neon-glow-sm);display:flex;flex-direction:column;overflow:hidden}.room-settings-panel[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--space-lg);animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.settings-content[_ngcontent-%COMP%]{background:var(--bg-card);border:2px solid var(--border-neon);border-radius:var(--radius-lg);box-shadow:var(--neon-glow-lg);width:100%;max-width:400px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.settings-header[_ngcontent-%COMP%]{padding:var(--space-lg);border-bottom:1px solid var(--border-neon);display:flex;justify-content:space-between;align-items:center;background:var(--bg-secondary)}.settings-header[_ngcontent-%COMP%]   .settings-title[_ngcontent-%COMP%]{font-size:var(--font-size-xl);font-weight:600;color:var(--text-primary);text-shadow:var(--neon-glow-sm);margin:0}.settings-header[_ngcontent-%COMP%]   .close-settings[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:var(--space-sm);border-radius:var(--radius-md);transition:all .2s ease}.settings-header[_ngcontent-%COMP%]   .close-settings[_ngcontent-%COMP%]:hover{background:rgba(var(--error),.1);color:var(--error)}.settings-header[_ngcontent-%COMP%]   .close-settings[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{font-size:var(--font-size-lg)}.settings-body[_ngcontent-%COMP%]{padding:var(--space-lg)}.settings-body[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-lg)}.settings-body[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.settings-body[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]   .setting-icon[_ngcontent-%COMP%]{font-size:var(--font-size-lg)}.settings-body[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]{font-size:var(--font-size-base);color:var(--text-primary);font-weight:500}.settings-body[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:24px}.settings-body[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.settings-body[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .toggle-slider[_ngcontent-%COMP%]{background-color:var(--neon-primary)}.settings-body[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .toggle-slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.settings-body[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:var(--bg-tertiary);border:1px solid var(--border-muted);transition:.3s;border-radius:24px}.settings-body[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:2px;bottom:2px;background-color:var(--text-primary);transition:.3s;border-radius:50%}.settings-body[_ngcontent-%COMP%]   .setting-description[_ngcontent-%COMP%]{margin-top:var(--space-md);padding:var(--space-md);background:var(--bg-tertiary);border-radius:var(--radius-md);border:1px solid var(--border-muted)}.settings-body[_ngcontent-%COMP%]   .setting-description[_ngcontent-%COMP%]   .description-text[_ngcontent-%COMP%]{font-size:var(--font-size-sm);color:var(--text-secondary);margin:0;line-height:1.4}.username-modal[_ngcontent-%COMP%], .password-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--space-lg)}.modal-content[_ngcontent-%COMP%]{background:var(--bg-card);border:2px solid var(--border-neon);border-radius:var(--radius-lg);box-shadow:var(--neon-glow-lg);width:100%;max-width:400px;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.modal-header[_ngcontent-%COMP%]{padding:var(--space-lg);border-bottom:1px solid var(--border-neon);text-align:center;background:var(--bg-secondary)}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:var(--font-size-xl);font-weight:600;color:var(--text-primary);margin-bottom:var(--space-sm);display:flex;align-items:center;justify-content:center;gap:var(--space-sm)}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{font-size:var(--font-size-lg)}.modal-header[_ngcontent-%COMP%]   .modal-description[_ngcontent-%COMP%]{font-size:var(--font-size-sm);color:var(--text-secondary);margin:0}.modal-body[_ngcontent-%COMP%]{padding:var(--space-lg)}.username-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], .password-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.username-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%], .password-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%;padding:var(--space-md);border:2px solid var(--border-neon);border-radius:var(--radius-md);background:var(--bg-secondary);color:var(--text-primary);font-family:var(--font-family);transition:all .3s ease;box-shadow:var(--neon-glow-sm)}.username-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus, .password-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--neon-accent);box-shadow:var(--neon-glow-md);background:var(--bg-tertiary)}.username-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder, .password-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted);font-style:italic}.username-form[_ngcontent-%COMP%]   .form-input.error[_ngcontent-%COMP%], .password-form[_ngcontent-%COMP%]   .form-input.error[_ngcontent-%COMP%]{border-color:var(--error);box-shadow:0 0 10px var(--error)}.error-banner[_ngcontent-%COMP%]{background:var(--bg-card);border:2px solid var(--error);color:var(--error);padding:var(--space-md) var(--space-lg);display:flex;align-items:center;gap:var(--space-sm);font-weight:500;border-radius:var(--radius-md);margin:var(--space-md);animation:_ngcontent-%COMP%_fadeIn .3s ease-out;box-shadow:0 0 10px var(--error)}.error-banner[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:var(--font-size-lg)}.loading-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--text-secondary)}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{border:3px solid var(--border-muted);border-top:3px solid var(--neon-primary);border-radius:50%;width:30px;height:30px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:var(--space-md)}.chat-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--space-md) var(--space-lg);background:var(--bg-secondary);border-bottom:1px solid var(--border-neon)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%], .chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{justify-content:flex-start}.chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{justify-content:flex-end}.chat-header[_ngcontent-%COMP%]   .header-center[_ngcontent-%COMP%]{flex:2;text-align:center}.chat-header[_ngcontent-%COMP%]   .header-center[_ngcontent-%COMP%]   .room-logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm);margin-bottom:var(--space-xs)}.chat-header[_ngcontent-%COMP%]   .header-center[_ngcontent-%COMP%]   .room-logo-container[_ngcontent-%COMP%]   .room-logo-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.chat-header[_ngcontent-%COMP%]   .header-center[_ngcontent-%COMP%]   .room-logo-container[_ngcontent-%COMP%]   .room-logo-icon[_ngcontent-%COMP%]   .room-logo-svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_logoPulse 2s ease-in-out infinite;filter:drop-shadow(0 0 8px rgba(139,92,246,.3))}.chat-header[_ngcontent-%COMP%]   .header-center[_ngcontent-%COMP%]   .room-logo-container[_ngcontent-%COMP%]   .room-title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);font-weight:600;margin:0;color:var(--neon-primary);text-shadow:var(--neon-glow-sm)}.chat-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;gap:var(--space-xs);font-size:var(--font-size-sm);font-weight:500;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-md);transition:all .3s ease}.chat-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary);color:var(--text-primary)}.chat-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   .back-icon[_ngcontent-%COMP%]{font-size:var(--font-size-lg)}.chat-header[_ngcontent-%COMP%]   .room-title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);font-weight:600;color:var(--text-primary);margin-bottom:var(--space-xs);text-shadow:var(--neon-glow-sm)}.chat-header[_ngcontent-%COMP%]   .room-status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-xs);font-size:var(--font-size-xs);color:var(--success);flex-direction:column}.chat-header[_ngcontent-%COMP%]   .room-status[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;background-color:var(--success);box-shadow:0 0 5px var(--success)}.chat-header[_ngcontent-%COMP%]   .room-status[_ngcontent-%COMP%]   .cleanup-notice[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:#8b5cf61a;border:1px solid rgba(139,92,246,.3);border-radius:var(--radius-sm)}.chat-header[_ngcontent-%COMP%]   .room-status[_ngcontent-%COMP%]   .cleanup-notice[_ngcontent-%COMP%]   .cleanup-icon[_ngcontent-%COMP%]{font-size:var(--font-size-xs);animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.chat-header[_ngcontent-%COMP%]   .room-status[_ngcontent-%COMP%]   .cleanup-notice[_ngcontent-%COMP%]   .cleanup-text[_ngcontent-%COMP%]{font-size:var(--font-size-xs);color:var(--text-tertiary);font-weight:500}.chat-header[_ngcontent-%COMP%]   .room-status[_ngcontent-%COMP%]   .encryption-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:#00ffff1a;border:1px solid var(--neon-accent);border-radius:var(--radius-sm)}.chat-header[_ngcontent-%COMP%]   .room-status[_ngcontent-%COMP%]   .encryption-status[_ngcontent-%COMP%]   .encryption-icon[_ngcontent-%COMP%]{font-size:var(--font-size-xs);animation:_ngcontent-%COMP%_pulse 2s infinite}.chat-header[_ngcontent-%COMP%]   .room-status[_ngcontent-%COMP%]   .encryption-status[_ngcontent-%COMP%]   .encryption-text[_ngcontent-%COMP%]{font-size:var(--font-size-xs);color:var(--neon-accent);font-weight:600;text-shadow:0 0 5px var(--neon-accent)}.chat-header[_ngcontent-%COMP%]   .modern-toggle-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:30px;margin-right:var(--space-sm)}.chat-header[_ngcontent-%COMP%]   .modern-toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.chat-header[_ngcontent-%COMP%]   .modern-toggle-switch[_ngcontent-%COMP%]   .toggle-track[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:var(--bg-tertiary);border:1px solid var(--border-neon);border-radius:30px;transition:all .3s ease;box-shadow:var(--neon-glow-sm);display:flex;align-items:center;justify-content:space-between;padding:0 6px}.chat-header[_ngcontent-%COMP%]   .modern-toggle-switch[_ngcontent-%COMP%]   .toggle-track[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]{font-size:10px;font-weight:600;color:var(--text-primary);text-shadow:var(--neon-glow-sm);transition:all .3s ease;z-index:1}.chat-header[_ngcontent-%COMP%]   .modern-toggle-switch[_ngcontent-%COMP%]   .toggle-track[_ngcontent-%COMP%]   .toggle-thumb[_ngcontent-%COMP%]{position:absolute;height:24px;width:24px;left:3px;bottom:3px;background-color:var(--bg-primary);border:1px solid var(--border-neon);border-radius:50%;transition:all .3s ease;box-shadow:var(--neon-glow-sm);z-index:2}.chat-header[_ngcontent-%COMP%]   .modern-toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .toggle-track[_ngcontent-%COMP%]{background-color:var(--neon-primary);border-color:var(--neon-primary);box-shadow:var(--neon-glow-md)}.chat-header[_ngcontent-%COMP%]   .modern-toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .toggle-track[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]{color:var(--bg-primary);text-shadow:none}.chat-header[_ngcontent-%COMP%]   .modern-toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .toggle-track[_ngcontent-%COMP%]   .toggle-thumb[_ngcontent-%COMP%]{background-color:var(--bg-primary);border-color:var(--neon-primary);box-shadow:var(--neon-glow-sm);transform:translate(30px)}.chat-header[_ngcontent-%COMP%]   .modern-toggle-switch[_ngcontent-%COMP%]:hover   .toggle-track[_ngcontent-%COMP%]{box-shadow:var(--neon-glow-md)}.chat-header[_ngcontent-%COMP%]   .modern-toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked:hover + .toggle-track[_ngcontent-%COMP%]{box-shadow:var(--neon-glow-lg)}.chat-header[_ngcontent-%COMP%]   .visibility-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:var(--font-size-xs);margin-right:var(--space-md)}.chat-header[_ngcontent-%COMP%]   .online-indicator[_ngcontent-%COMP%]{display:none}.countdown-section[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--bg-secondary);border-bottom:1px solid var(--border-neon)}.chat-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background:var(--bg-tertiary);min-height:0}.messages-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:var(--space-md);overflow-y:auto;scroll-behavior:smooth;min-height:0;max-height:calc(100vh - 200px);scrollbar-width:none;-ms-overflow-style:none}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.empty-messages[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:var(--text-secondary)}.empty-messages[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:var(--font-size-4xl);margin-bottom:var(--space-md);opacity:.7}.empty-messages[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:var(--font-size-lg);margin-bottom:var(--space-sm);color:var(--text-primary)}.empty-messages[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-size-sm)}.messages-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end;gap:var(--space-sm)}.message-item[_ngcontent-%COMP%]{display:flex;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.message-item.own-message[_ngcontent-%COMP%]{justify-content:flex-end}.message-item.own-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background:var(--neon-primary);color:var(--bg-primary);border-color:var(--neon-primary);box-shadow:0 0 15px #8b5cf64d}.message-item.own-message[_ngcontent-%COMP%]   .message-meta[_ngcontent-%COMP%]{text-align:right;color:#fffc}.message-item.other-message[_ngcontent-%COMP%]{justify-content:flex-start}.message-item.other-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background:var(--bg-card);color:#fff;border-color:var(--border-neon)}.message-item.other-message[_ngcontent-%COMP%]   .message-meta[_ngcontent-%COMP%]{text-align:left;color:#fffc}.message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{max-width:80%;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-lg);border:1px solid;box-shadow:var(--neon-glow-sm)}.message-item[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{font-size:var(--font-size-sm);word-wrap:break-word;margin-bottom:var(--space-xs)}.message-item[_ngcontent-%COMP%]   .message-meta[_ngcontent-%COMP%]{font-size:var(--font-size-xs)}.message-input-container[_ngcontent-%COMP%]{padding:var(--space-md);background:var(--bg-secondary);border-top:1px solid var(--border-neon);flex-shrink:0;position:sticky;bottom:0;z-index:10}.message-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.message-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);align-items:center}.message-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{flex:1;position:relative}.message-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{width:100%;padding:var(--space-md);border:2px solid var(--border-neon);border-radius:var(--radius-md);background:var(--bg-card);color:var(--text-primary);font-family:var(--font-family);transition:all .3s ease;box-shadow:var(--neon-glow-sm)}.message-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--neon-accent);box-shadow:var(--neon-glow-md);background:var(--bg-tertiary)}.message-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted);font-style:italic}.message-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .message-input.error[_ngcontent-%COMP%]{border-color:var(--error);box-shadow:0 0 10px var(--error)}.message-form[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{background:var(--neon-primary);color:var(--bg-primary);border:2px solid var(--neon-primary);padding:var(--space-md);border-radius:var(--radius-md);font-size:var(--font-size-lg);width:50px;height:50px;flex-shrink:0;transition:all .3s ease}.message-form[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--neon-secondary);border-color:var(--neon-secondary);transform:translateY(-1px);box-shadow:var(--neon-glow-md)}.message-form[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:disabled{background:var(--bg-tertiary);border-color:var(--border-muted);color:var(--text-muted);cursor:not-allowed;opacity:.6}.message-form[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]   .send-icon[_ngcontent-%COMP%]{font-size:var(--font-size-lg)}.message-form[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]   .cooldown-text[_ngcontent-%COMP%]{font-size:var(--font-size-sm);font-weight:600;color:var(--text-muted)}.error-toast[_ngcontent-%COMP%], .success-toast[_ngcontent-%COMP%]{position:fixed;bottom:var(--space-lg);left:50%;transform:translate(-50%);background:var(--bg-card);border:2px solid;border-radius:var(--radius-md);padding:var(--space-md) var(--space-lg);display:flex;align-items:center;gap:var(--space-sm);font-size:var(--font-size-base);box-shadow:var(--shadow-lg);z-index:100;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.error-toast[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .error-toast[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%], .success-toast[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .success-toast[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{font-size:var(--font-size-lg)}.error-toast[_ngcontent-%COMP%]{border-color:var(--error);color:var(--error);box-shadow:0 0 15px #ef444480}.success-toast[_ngcontent-%COMP%]{border-color:var(--success);color:var(--success);box-shadow:0 0 15px #10b98180}.version-footer[_ngcontent-%COMP%]{text-align:center;padding:var(--space-md) var(--space-lg);background:var(--bg-secondary);border-top:1px solid var(--border-neon)}.version-footer[_ngcontent-%COMP%]   .version-text[_ngcontent-%COMP%]{font-size:var(--font-size-xs);color:var(--text-tertiary);margin:0;font-style:italic;opacity:.7}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.chat-room-container[_ngcontent-%COMP%]{margin:0;height:100vh;border-radius:0;border-left:none;border-right:none;border-top:none;box-shadow:none}.chat-header[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md)}.chat-header[_ngcontent-%COMP%]   .room-title[_ngcontent-%COMP%]{font-size:var(--font-size-base)}.chat-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);font-size:var(--font-size-xs)}.message-input-container[_ngcontent-%COMP%]{padding:var(--space-sm);position:sticky;bottom:0}.messages-container[_ngcontent-%COMP%]{max-height:calc(100vh - 180px)}.modal-content[_ngcontent-%COMP%]{margin:var(--space-md)}}@media (max-width: 480px){.chat-room-container[_ngcontent-%COMP%]{border-left:none;border-right:none;border-top:none}.chat-header[_ngcontent-%COMP%]   .header-center[_ngcontent-%COMP%]{flex:1}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%], .chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{flex:0}.message-item[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{max-width:90%}}@keyframes _ngcontent-%COMP%_logoPulse{0%,to{transform:scale(1);filter:drop-shadow(0 0 8px rgba(139,92,246,.3))}50%{transform:scale(1.05);filter:drop-shadow(0 0 16px rgba(139,92,246,.5))}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}}']})};export{pe as ChatRoomComponent};
