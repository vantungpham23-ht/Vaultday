import{a as w,b as f,c as k,d as H,e as T,f as j,g as z,h as D,i as L,j as G,k as V}from"./chunk-OGTIXNAF.js";import{c as N,f as F}from"./chunk-PCKYNI25.js";import{$a as b,Ab as y,Bb as E,Ca as u,Ha as C,La as s,Sa as l,Ta as i,Ua as n,Va as _,Y as x,Ya as I,Z as h,Za as g,_a as c,ab as m,bb as R,cb as v,eb as M,fb as S,sa as a,yb as O,zb as P}from"./chunk-5YBEVAAG.js";import"./chunk-LJ5XHLMQ.js";import{h as p}from"./chunk-FK42CRUA.js";function B(o,r){o&1&&(i(0,"span"),m(1,"Room name is required"),n())}function J(o,r){if(o&1&&(i(0,"div",20),s(1,B,2,0,"span",13),n()),o&2){let t=c();a(),l("ngIf",t.roomName==null||t.roomName.errors==null?null:t.roomName.errors.required)}}function $(o,r){o&1&&(i(0,"span"),m(1,"Create Room"),n())}function W(o,r){o&1&&(i(0,"span"),m(1,"Creating..."),n())}function K(o,r){o&1&&(i(0,"span"),m(1,"Room ID is required"),n())}function Q(o,r){if(o&1&&(i(0,"div",20),s(1,K,2,0,"span",13),n()),o&2){let t=c();a(),l("ngIf",t.roomId==null||t.roomId.errors==null?null:t.roomId.errors.required)}}function U(o,r){o&1&&(i(0,"div",21)(1,"p"),m(2,"No public rooms available at the moment."),n()())}function X(o,r){if(o&1){let t=I();i(0,"div",24),g("click",function(){let d=x(t).$implicit,A=c(2);return h(A.goToRoom(d.id))}),i(1,"div",25)(2,"h3",26),m(3),n(),i(4,"p",27),m(5),M(6,"date"),n()(),i(7,"div",28),m(8,"\u2192"),n()()}if(o&2){let t=r.$implicit;a(3),R(t.name),a(2),v("Created: ",S(6,2,t.created_at,"short"))}}function Y(o,r){if(o&1&&(i(0,"div",22),s(1,X,9,5,"div",23),n()),o&2){let t=c();a(),l("ngForOf",t.publicRooms)}}function Z(o,r){if(o&1&&(i(0,"div",29),m(1),n()),o&2){let t=c();a(),v(" ",t.errorMessage," ")}}function ee(o,r){if(o&1&&(i(0,"div",30),m(1),n()),o&2){let t=c();a(),v(" ",t.successMessage," ")}}var q=class o{constructor(r,t,e,d){this.fb=r;this.router=t;this.authService=e;this.supabaseService=d;this.createRoomForm=this.fb.group({roomName:["",[f.required,f.minLength(1)]],password:[""]}),this.joinRoomForm=this.fb.group({roomId:["",[f.required,f.minLength(1)]]})}createRoomForm;joinRoomForm;publicRooms=[];isLoading=!1;errorMessage="";successMessage="";ngOnInit(){this.loadPublicRooms()}onCreateRoom(){return p(this,null,function*(){if(this.createRoomForm.valid){this.isLoading=!0,this.errorMessage="",this.successMessage="";let{roomName:r,password:t}=this.createRoomForm.value,{data:e,error:d}=yield this.supabaseService.createRoom(r,t);d?(this.errorMessage=d.message||"Failed to create room",this.isLoading=!1):e&&(this.successMessage="Room created successfully!",this.createRoomForm.reset(),this.loadPublicRooms(),this.isLoading=!1)}})}onJoinRoom(){return p(this,null,function*(){if(this.joinRoomForm.valid){let{roomId:r}=this.joinRoomForm.value;this.router.navigate(["/room",r])}})}loadPublicRooms(){return p(this,null,function*(){let{data:r,error:t}=yield this.supabaseService.getPublicRooms();t?(console.error("Error loading public rooms:",t),this.publicRooms=[]):this.publicRooms=r||[]})}goToRoom(r){this.router.navigate(["/room",r])}signOut(){return p(this,null,function*(){yield this.authService.signOut()})}get roomName(){return this.createRoomForm.get("roomName")}get password(){return this.createRoomForm.get("password")}get roomId(){return this.joinRoomForm.get("roomId")}static \u0275fac=function(t){return new(t||o)(u(D),u(N),u(V),u(G))};static \u0275cmp=C({type:o,selectors:[["app-home"]],decls:41,vars:18,consts:[[1,"home-container"],[1,"home-header"],[1,"sign-out-button",3,"click"],[1,"home-content"],[1,"section"],[1,"form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","roomName",1,"form-label"],["type","text","id","roomName","formControlName","roomName","placeholder","Enter room name",1,"form-input"],["class","error-message",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter password (leave empty for public room)",1,"form-input"],["type","submit",1,"submit-button",3,"disabled"],[4,"ngIf"],["for","roomId",1,"form-label"],["type","text","id","roomId","formControlName","roomId","placeholder","Enter room ID",1,"form-input"],["class","no-rooms",4,"ngIf"],["class","rooms-list",4,"ngIf"],["class","error-message global-error",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"error-message"],[1,"no-rooms"],[1,"rooms-list"],["class","room-item",3,"click",4,"ngFor","ngForOf"],[1,"room-item",3,"click"],[1,"room-info"],[1,"room-name"],[1,"room-date"],[1,"room-arrow"],[1,"error-message","global-error"],[1,"success-message"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),m(3,"Welcome to VaultDay"),n(),i(4,"button",2),g("click",function(){return e.signOut()}),m(5,"Sign Out"),n()(),i(6,"div",3)(7,"div",4)(8,"h2"),m(9,"Create Room"),n(),i(10,"form",5),g("ngSubmit",function(){return e.onCreateRoom()}),i(11,"div",6)(12,"label",7),m(13,"Room Name"),n(),_(14,"input",8),s(15,J,2,1,"div",9),n(),i(16,"div",6)(17,"label",10),m(18,"Password (Optional)"),n(),_(19,"input",11),n(),i(20,"button",12),s(21,$,2,0,"span",13)(22,W,2,0,"span",13),n()()(),i(23,"div",4)(24,"h2"),m(25,"Join Room by ID"),n(),i(26,"form",5),g("ngSubmit",function(){return e.onJoinRoom()}),i(27,"div",6)(28,"label",14),m(29,"Room ID"),n(),_(30,"input",15),s(31,Q,2,1,"div",9),n(),i(32,"button",12),m(33," Join Room "),n()()(),i(34,"div",4)(35,"h2"),m(36,"Public Rooms"),n(),s(37,U,3,0,"div",16)(38,Y,2,1,"div",17),n(),s(39,Z,2,1,"div",18)(40,ee,2,1,"div",19),n()()),t&2&&(a(10),l("formGroup",e.createRoomForm),a(4),b("error",(e.roomName==null?null:e.roomName.invalid)&&(e.roomName==null?null:e.roomName.touched)),a(),l("ngIf",(e.roomName==null?null:e.roomName.invalid)&&(e.roomName==null?null:e.roomName.touched)),a(5),b("loading",e.isLoading),l("disabled",e.createRoomForm.invalid||e.isLoading),a(),l("ngIf",!e.isLoading),a(),l("ngIf",e.isLoading),a(4),l("formGroup",e.joinRoomForm),a(4),b("error",(e.roomId==null?null:e.roomId.invalid)&&(e.roomId==null?null:e.roomId.touched)),a(),l("ngIf",(e.roomId==null?null:e.roomId.invalid)&&(e.roomId==null?null:e.roomId.touched)),a(),l("disabled",e.joinRoomForm.invalid),a(5),l("ngIf",e.publicRooms.length===0),a(),l("ngIf",e.publicRooms.length>0),a(),l("ngIf",e.errorMessage),a(),l("ngIf",e.successMessage))},dependencies:[E,O,P,F,L,T,w,k,H,j,z,y],styles:[".home-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#000;color:#fff;padding:20px}.home-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:40px;padding-bottom:20px;border-bottom:1px solid #333}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:600;margin:0}.sign-out-button[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:none;padding:12px 24px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.sign-out-button[_ngcontent-%COMP%]:hover{background-color:#e5e5e5}.home-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;display:flex;flex-direction:column;gap:40px}.section[_ngcontent-%COMP%]{background-color:#111;border-radius:8px;padding:24px;border:1px solid #333}.section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0 0 20px;color:#fff}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #333;border-radius:6px;font-size:16px;background-color:#000;color:#fff;transition:border-color .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff}.form-input.error[_ngcontent-%COMP%]{border-color:#dc2626}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.submit-button[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:none;padding:14px 20px;border-radius:6px;font-size:16px;font-weight:500;cursor:pointer;transition:all .2s ease;margin-top:10px}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e5e5e5}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#6b7280;cursor:not-allowed}.submit-button.loading[_ngcontent-%COMP%]{background-color:#9ca3af}.error-message[_ngcontent-%COMP%]{font-size:12px;color:#dc2626;margin-top:4px}.error-message.global-error[_ngcontent-%COMP%]{background-color:#1f2937;border:1px solid #dc2626;padding:12px;border-radius:6px;margin-top:20px;font-size:14px}.success-message[_ngcontent-%COMP%]{font-size:14px;color:#059669;background-color:#064e3b;border:1px solid #059669;padding:12px;border-radius:6px;margin-top:20px}.no-rooms[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.no-rooms[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#9ca3af;font-size:16px;margin:0}.rooms-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.room-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background-color:#1a1a1a;border-radius:6px;border:1px solid #333;cursor:pointer;transition:all .2s ease}.room-item[_ngcontent-%COMP%]:hover{background-color:#222;border-color:#555}.room-info[_ngcontent-%COMP%]{flex:1}.room-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 4px;color:#fff}.room-date[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af;margin:0}.room-arrow[_ngcontent-%COMP%]{font-size:18px;color:#9ca3af;font-weight:700}"]})};export{q as HomeComponent};
