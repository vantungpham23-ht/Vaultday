<div class="home-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <div class="logo-container">
        <div class="logo-icon">
          <svg class="logo-svg" viewBox="0 0 32 32" width="48" height="48">
            <defs>
              <linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#a78bfa;stop-opacity:1" />
              </linearGradient>
            </defs>
            <g fill="none" stroke="url(#logoGrad)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M8 10c-1 0-2 1-2 2v8c0 1 1 2 2 2h1"/>
              <path d="M9 12h14c1 0 2 1 2 2v4c0 1-1 2-2 2h-8l-3 3v-3H9c-1 0-2-1-2-2v-4c0-1 1-2 2-2z"/>
              <path d="M23 10c1 0 2 1 2 2v8c0 1-1 2-2 2h-1"/>
            </g>
            <circle cx="14" cy="16" r="1" fill="url(#logoGrad)"/>
            <circle cx="18" cy="16" r="1" fill="url(#logoGrad)"/>
          </svg>
        </div>
        <h1 class="app-title glow">VaultDay</h1>
      </div>
      <p class="app-subtitle">Vault it today. Gone tomorrow</p>
      <div class="cleanup-info">
        <p class="cleanup-text">
          <span class="cleanup-icon">üïõ</span>
          T·∫•t c·∫£ ph√≤ng chat s·∫Ω t·ª± ƒë·ªông x√≥a v√†o l√∫c 00:00
        </p>
      </div>
    </div>
  </div>

  <!-- Countdown Timer Section -->
  <div class="countdown-section">
    <app-countdown-timer></app-countdown-timer>
  </div>

  <!-- Public Rooms Section -->
  <div class="public-rooms-section">
    <div class="section-header">
      <h2 class="section-title">
        <span class="icon">üî•</span>
        Ph√≤ng Chat Hi·ªán C√≥
      </h2>
    </div>
    <div class="rooms-list-container">
      <div *ngIf="isLoadingRooms" class="loading-state">
        <div class="loading-spinner"></div>
        <p>ƒêang t·∫£i danh s√°ch ph√≤ng...</p>
      </div>
      <div *ngIf="!isLoadingRooms && publicRooms.length === 0" class="no-rooms">
        <p class="error-text">Ch∆∞a c√≥ ph√≤ng n√†o</p>
        <button class="btn-secondary btn-sm" (click)="loadPublicRooms()">
          <span class="refresh-icon">üîÑ</span>
          L√†m m·ªõi
        </button>
      </div>
      <div *ngIf="!isLoadingRooms && publicRooms.length > 0" class="rooms-list">
        <div 
          *ngFor="let room of publicRooms; trackBy: trackByRoomId" 
          class="room-item" 
          (click)="goToRoom(room.id)">
          <div class="room-info">
            <h3 class="room-name">{{ room.name }}</h3>
            <p class="room-meta">T·∫°o l√∫c: {{ room.created_at | date:'dd/MM/yyyy HH:mm' }}</p>
          </div>
          <div class="room-actions">
            <span class="room-status">üü¢</span>
          </div>
        </div>
      </div>
      <div *ngIf="!isLoadingRooms && publicRooms.length > 0" class="refresh-button">
        <button class="btn-secondary btn-sm" (click)="loadPublicRooms()">
          <span class="refresh-icon">üîÑ</span>
          L√†m m·ªõi
        </button>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="action-buttons">
    <button class="btn-primary btn-lg" (click)="showJoinRoom = !showJoinRoom">
      Tham Gia Ph√≤ng
    </button>
  </div>

  <!-- Join Room Form -->
  <div *ngIf="showJoinRoom" class="form-section">
    <div class="form-container">
      <h3 class="form-title">Tham Gia Ph√≤ng</h3>
      <form [formGroup]="joinRoomForm" (ngSubmit)="onJoinRoom()" class="join-form">
        <div class="form-group">
          <input
            type="text"
            formControlName="roomId"
            class="form-input"
            placeholder="Nh·∫≠p m√£ ph√≤ng (6 k√Ω t·ª±)..."
            [class.error]="roomId?.invalid && roomId?.touched"
          />
          <div *ngIf="roomId?.invalid && roomId?.touched" class="error-message">
            <span *ngIf="roomId?.errors?.['required']">M√£ ph√≤ng l√† b·∫Øt bu·ªôc</span>
            <span *ngIf="roomId?.errors?.['minlength'] || roomId?.errors?.['maxlength']">M√£ ph√≤ng ph·∫£i c√≥ ƒë√∫ng 6 k√Ω t·ª±</span>
          </div>
        </div>

        <button
          type="submit"
          class="btn-primary btn-lg w-full"
          [disabled]="joinRoomForm.invalid || isLoading"
        >
          <span *ngIf="!isLoading">Tham Gia</span>
          <span *ngIf="isLoading">ƒêang x·ª≠ l√Ω...</span>
        </button>
      </form>
    </div>
  </div>

  <!-- Generated Room Code Display -->
  <div *ngIf="generatedRoomCode" class="room-code-section">
    <div class="room-code-container">
      <h3 class="room-code-title">M√£ Ph√≤ng C·ªßa B·∫°n</h3>
      <div class="room-code-display">
        <span class="room-code">{{ generatedRoomCode }}</span>
        <button class="copy-btn" (click)="copyRoomCode()">
          <span class="copy-icon">üìã</span>
        </button>
      </div>
      <p class="room-code-hint">Chia s·∫ª m√£ n√†y ƒë·ªÉ ng∆∞·ªùi kh√°c c√≥ th·ªÉ tham gia ph√≤ng</p>
    </div>
  </div>

  <!-- Room Status -->
  <div *ngIf="currentRoom" class="room-status">
    <p class="status-text">ƒê√£ tham gia: {{ currentRoom.name }} ({{ currentRoom.id }}) - 1 ng∆∞·ªùi</p>
  </div>

  <!-- Messages -->
  <div *ngIf="errorMessage" class="error-toast">
    <span class="error-icon">‚ö†Ô∏è</span>
    {{ errorMessage }}
  </div>

  <div *ngIf="successMessage" class="success-toast">
    <span class="success-icon">‚úÖ</span>
    {{ successMessage }}
  </div>
</div>
