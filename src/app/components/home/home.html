<div class="home-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <h1 class="app-title glow">VaultDay</h1>
      <p class="app-subtitle">M·ªôt ng√†y trong 'k√©t', r·ªìi xo√°.</p>
    </div>
  </div>

  <!-- Latest Room Section -->
  <div class="latest-room-section">
    <div class="section-header">
      <h2 class="section-title">
        <span class="icon">üî•</span>
        Ph√≤ng Chat M·ªõi Nh·∫•t
      </h2>
    </div>
    <div class="latest-room-content">
      <div *ngIf="isLoadingRooms" class="loading-state">
        <div class="loading-spinner"></div>
        <p>ƒêang t·∫£i ph√≤ng m·ªõi nh·∫•t...</p>
      </div>
      <div *ngIf="!isLoadingRooms && publicRooms.length === 0" class="no-rooms">
        <p class="error-text">L·ªói khi t·∫£i ph√≤ng m·ªõi nh·∫•t</p>
        <button class="btn-secondary btn-sm" (click)="loadPublicRooms()">
          <span class="refresh-icon">üîÑ</span>
          L√†m m·ªõi
        </button>
      </div>
      <div *ngIf="!isLoadingRooms && publicRooms.length > 0" class="latest-room-info">
        <div class="room-info">
          <h3 class="room-name">{{ publicRooms[0].name }}</h3>
          <p class="room-meta">T·∫°o l√∫c: {{ publicRooms[0].created_at | date:'dd/MM/yyyy HH:mm' }}</p>
        </div>
        <button class="btn-secondary btn-sm" (click)="loadPublicRooms()">
          <span class="refresh-icon">üîÑ</span>
          L√†m m·ªõi
        </button>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="action-buttons">
    <button class="btn-secondary btn-lg" (click)="showCreateRoom = !showCreateRoom">
      T·∫°o Ph√≤ng
    </button>
    <button class="btn-primary btn-lg" (click)="showJoinRoom = !showJoinRoom">
      Duy·ªát Ph√≤ng
    </button>
  </div>

  <!-- Create Room Form -->
  <div *ngIf="showCreateRoom" class="form-section">
    <div class="form-container">
      <h3 class="form-title">T·∫°o Ph√≤ng M·ªõi</h3>
      <form [formGroup]="createRoomForm" (ngSubmit)="onCreateRoom()" class="create-form">
        <div class="form-group">
          <input
            type="text"
            formControlName="roomName"
            class="form-input"
            placeholder="Nh·∫≠p t√™n ph√≤ng..."
            [class.error]="roomName?.invalid && roomName?.touched"
          />
          <div *ngIf="roomName?.invalid && roomName?.touched" class="error-message">
            <span *ngIf="roomName?.errors?.['required']">T√™n ph√≤ng l√† b·∫Øt bu·ªôc</span>
          </div>
        </div>

        <div class="form-group">
          <input
            type="password"
            formControlName="password"
            class="form-input"
            placeholder="M·∫≠t kh·∫©u (t√πy ch·ªçn)..."
          />
          <p class="form-hint">ƒê·ªÉ tr·ªëng ƒë·ªÉ t·∫°o ph√≤ng c√¥ng khai</p>
        </div>

        <button
          type="submit"
          class="btn-success btn-lg w-full"
          [disabled]="createRoomForm.invalid || isLoading"
        >
          <span *ngIf="!isLoading">T·∫°o Ph√≤ng</span>
          <span *ngIf="isLoading">ƒêang t·∫°o...</span>
        </button>
      </form>
    </div>
  </div>

  <!-- Join Room Form -->
  <div *ngIf="showJoinRoom" class="form-section">
    <div class="form-container">
      <h3 class="form-title">Tham Gia Ph√≤ng</h3>
      <form [formGroup]="joinRoomForm" (ngSubmit)="onJoinRoom()" class="join-form">
        <div class="form-group">
          <input
            type="text"
            formControlName="roomId"
            class="form-input"
            placeholder="Nh·∫≠p m√£ ph√≤ng..."
            [class.error]="roomId?.invalid && roomId?.touched"
          />
          <div *ngIf="roomId?.invalid && roomId?.touched" class="error-message">
            <span *ngIf="roomId?.errors?.['required']">M√£ ph√≤ng l√† b·∫Øt bu·ªôc</span>
          </div>
        </div>

        <button
          type="submit"
          class="btn-primary btn-lg w-full"
          [disabled]="joinRoomForm.invalid"
        >
          Tham Gia
        </button>
      </form>
    </div>
  </div>

  <!-- Room Status -->
  <div *ngIf="currentRoom" class="room-status">
    <p class="status-text">ƒê√£ tham gia: {{ currentRoom.name }} ({{ currentRoom.id }}) - 1 ng∆∞·ªùi</p>
  </div>

  <!-- Messages -->
  <div *ngIf="errorMessage" class="error-toast">
    <span class="error-icon">‚ö†Ô∏è</span>
    {{ errorMessage }}
  </div>

  <div *ngIf="successMessage" class="success-toast">
    <span class="success-icon">‚úÖ</span>
    {{ successMessage }}
  </div>
</div>
