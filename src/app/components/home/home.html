<div class="home-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <h1 class="app-title glow">VaultDay</h1>
      <p class="app-subtitle">Nh·∫Øn tin trong ng√†y</p>
    </div>
  </div>

  <!-- Countdown Timer Section -->
  <div class="countdown-section">
    <app-countdown-timer></app-countdown-timer>
  </div>

  <!-- Latest Room Section -->
  <div class="latest-room-section">
    <div class="section-header">
      <h2 class="section-title">
        <span class="icon">üî•</span>
        Ph√≤ng Chat M·ªõi Nh·∫•t
      </h2>
    </div>
    <div class="latest-room-content">
      <div *ngIf="isLoadingRooms" class="loading-state">
        <div class="loading-spinner"></div>
        <p>ƒêang t·∫£i ph√≤ng m·ªõi nh·∫•t...</p>
      </div>
      <div *ngIf="!isLoadingRooms && publicRooms.length === 0" class="no-rooms">
        <p class="error-text">L·ªói khi t·∫£i ph√≤ng m·ªõi nh·∫•t</p>
        <button class="btn-secondary btn-sm" (click)="loadPublicRooms()">
          <span class="refresh-icon">üîÑ</span>
          L√†m m·ªõi
        </button>
      </div>
      <div *ngIf="!isLoadingRooms && publicRooms.length > 0" class="latest-room-info">
        <div class="room-info">
          <h3 class="room-name">{{ publicRooms[0].name }}</h3>
          <p class="room-meta">T·∫°o l√∫c: {{ publicRooms[0].created_at | date:'dd/MM/yyyy HH:mm' }}</p>
        </div>
        <button class="btn-secondary btn-sm" (click)="loadPublicRooms()">
          <span class="refresh-icon">üîÑ</span>
          L√†m m·ªõi
        </button>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="action-buttons">
    <button 
      class="btn-primary btn-lg" 
      (click)="onCreateAndJoinRoom()"
      [disabled]="isLoading"
    >
      <span *ngIf="!isLoading">T·∫°o Ph√≤ng M·ªõi</span>
      <span *ngIf="isLoading">ƒêang t·∫°o...</span>
    </button>
    <button class="btn-secondary btn-lg" (click)="showJoinRoom = !showJoinRoom">
      Tham Gia Ph√≤ng
    </button>
  </div>

  <!-- Join Room Form -->
  <div *ngIf="showJoinRoom" class="form-section">
    <div class="form-container">
      <h3 class="form-title">Tham Gia Ph√≤ng</h3>
      <form [formGroup]="joinRoomForm" (ngSubmit)="onJoinRoom()" class="join-form">
        <div class="form-group">
          <input
            type="text"
            formControlName="roomId"
            class="form-input"
            placeholder="Nh·∫≠p m√£ ph√≤ng..."
            [class.error]="roomId?.invalid && roomId?.touched"
          />
          <div *ngIf="roomId?.invalid && roomId?.touched" class="error-message">
            <span *ngIf="roomId?.errors?.['required']">M√£ ph√≤ng l√† b·∫Øt bu·ªôc</span>
          </div>
        </div>

        <button
          type="submit"
          class="btn-primary btn-lg w-full"
          [disabled]="joinRoomForm.invalid"
        >
          Tham Gia
        </button>
      </form>
    </div>
  </div>

  <!-- Generated Room Code Display -->
  <div *ngIf="generatedRoomCode" class="room-code-section">
    <div class="room-code-container">
      <h3 class="room-code-title">M√£ Ph√≤ng C·ªßa B·∫°n</h3>
      <div class="room-code-display">
        <span class="room-code">{{ generatedRoomCode }}</span>
        <button class="copy-btn" (click)="copyRoomCode()">
          <span class="copy-icon">üìã</span>
        </button>
      </div>
      <p class="room-code-hint">Chia s·∫ª m√£ n√†y ƒë·ªÉ ng∆∞·ªùi kh√°c c√≥ th·ªÉ tham gia ph√≤ng</p>
    </div>
  </div>

  <!-- Room Status -->
  <div *ngIf="currentRoom" class="room-status">
    <p class="status-text">ƒê√£ tham gia: {{ currentRoom.name }} ({{ currentRoom.id }}) - 1 ng∆∞·ªùi</p>
  </div>

  <!-- Messages -->
  <div *ngIf="errorMessage" class="error-toast">
    <span class="error-icon">‚ö†Ô∏è</span>
    {{ errorMessage }}
  </div>

  <div *ngIf="successMessage" class="success-toast">
    <span class="success-icon">‚úÖ</span>
    {{ successMessage }}
  </div>

  <!-- Version Footer -->
  <div class="version-footer">
    <p class="version-text">Version 0.0.1</p>
  </div>
</div>
